{% import _self as menu %}

{{ menu.menu_links(items, attributes, 0) }}

{% macro menu_links(items, attributes, menu_level) %}
  <nav aria-label="Footer" class="border-top mb-5 mt-4 pt-4">
    <ul{{attributes.addClass(['menu', 'menu-level-'~items|first.menu_level]).addClass('m-0 d-flex flex-row gap-5')}}>
      {% for key, item in items %}
        {% if key|first != '#' %}
          {% set menu_item_classes = [
            'menu-item',
            item.is_expanded ? 'menu-item--expanded',
            item.is_collapsed ? 'menu-item--collapsed',
            item.in_active_trail ? 'menu-item--active-trail',
          ] %}

          <li{{item.attributes.addClass(menu_item_classes)}}>

            {% set attributi = create_attribute({}) %}
            {% for item in  item.entity.field_attributi %}
              {% set attributi = attributi.setAttribute((item.value|split('=')[0]|raw),(item.value|split('=')[1]|replace({'"': ''}))) %}
            {% endfor %}

            {% if item.in_active_trail is not empty %}
              {% set attributi = attributi.addClass('active') %}
            {% endif %}

            {{ link(item.title, item.url, attributi.addClass('lh-lg text-white')) }}
            {% set rendered_content = item.content|without('')|render %}
            {% if rendered_content %}
              {{ rendered_content }}
            {% endif %}
          </li>
        {% endif %}
    {% endfor %}
    </ul>
  </nav>
{% endmacro %}